<script>
interface JSONItem{
trackName: string;
albumName: string;
albumDuration: number;
}
const res = await fetch("https://matthewviamusic.com/api/tracks")
const json: JSONItem[] = await res.json()

const tracks: string[] = json.map((x:JSONItem) => x.trackName)
const albums: string[] = json.map((x:JSONItem) => x.albumName)
const albumDuration: number[] = json.map((x:JSONItem) => x.albumDuration)


// TRACKS
const totalTracks = tracks.length
Â 
// ALBUMS
const totalAlbumsInDiscography =  Array.from(new Set(albums))

// TIME
const totalAlbumMinutes =  Array.from(new Set(albumDuration))
let under45 = totalAlbumMinutes.filter((x) => x < 45 ? x : null)
const backgroundColors = under45.map(x => (x < 30 ? 'green' : '#FF4E2B'));

  const ctx = document.getElementById('bar');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: under45,
      datasets: [{
        label: 'Albums Under 30 Mins',
        data: under45,
        borderWidth: 3,
        borderColor: '#F8E9DD',
        backgroundColor: backgroundColors,
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }    
      },
    }
  })
</script>

